<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Site Icon -->
    <link rel="shortcut icon" type="image/jpg" href="./assets/img/btc.png" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x"
      crossorigin="anonymous"
    />

    <!-- Theme Color -->
    <meta name="theme-color" content="#ffffff" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="./styles/override-bootstrap.css" />
    <link rel="stylesheet" href="./styles/custom-bootstrap.css" />
    <link rel="stylesheet" href="./styles/style.css" />

    <!-- Site Title -->
    <title>Crypto Currency Prices</title>
  </head>
  <body>
    <div class="container-fluid">
      <div class="container">
        <div class="row mt-3">
          <div class="col align-self-end">
            <div class="form-check form-switch">
              <label
                class="form-check-label"
                for="theme-switcher"
                id="theme-switcher-label"
                >Light Mode</label
              >
              <input
                class="form-check-input"
                type="checkbox"
                id="theme-switcher"
              />
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-sm-12 col-lg-4 p-4">
            <div class="row mb-1">
              <div class="custom-card currencies-card">
                <h4 class="text-center heading mb-3" id="currencies-heading">
                  Currencies
                </h4>

                <div class="input-group mb-3">
                  <input
                    type="text"
                    id="search-input"
                    class="form-control"
                    placeholder="Search Currency"
                    aria-label="Search Currency"
                    aria-describedby="basic-addon1"
                  />
                </div>

                <div class="row mb-2">
                  <div class="col">
                    <p class="m-0 text-start small bold">
                      <span
                        style="cursor: pointer; user-select: none"
                        onclick="toggleFilterStarred();"
                        id="filter-starred"
                      >
                        <img
                          class="small-star-icon"
                          src="./assets/img/not-star.png"
                          alt="star"
                        />
                        &nbsp;Starred
                      </span>
                    </p>
                  </div>
                  <div class="col">
                    <p class="m-0 text-end small bold">
                      <span
                        style="cursor: pointer; user-select: none"
                        onclick="switchSort();"
                        id="sort-by"
                      >
                      </span>
                    </p>
                  </div>
                </div>

                <!-- START: Market Currencies List -->
                <ul class="list-group currencies-list" id="market24hrs">
                  <!-- START: Currency -->
                  <li class="list-group-item">
                    <div class="row mt-5 mb-5">
                      <div class="d-flex justify-content-center">
                        <div class="spinner-border text-primary" role="status">
                          <span class="visually-hidden">Loading...</span>
                        </div>
                      </div>
                    </div>
                  </li>
                  <!-- END: Currency -->
                </ul>
                <!-- END: Market Currencies List -->
              </div>
            </div>
          </div>
          <div class="col-sm-12 col-lg-8 p-4" id="c">
            <div class="row">
              <div
                class="position-relative custom-card chart-card"
                id="chart-card"
              >
                <div class="position-absolute top-0 end-0">
                  <div class="star-wrapper" id="star-wrapper">
                    <img
                      class="star-icon"
                      src="./assets/img/not-star.png"
                      alt="star"
                    />
                  </div>
                </div>
                <div class="row mt-5 mb-5 pt-5 pb-5" id="chart-loader">
                  <div class="d-flex justify-content-center">
                    <div class="spinner-border text-primary" role="status">
                      <span class="visually-hidden">Loading...</span>
                    </div>
                  </div>
                </div>
                <div id="chart-stats"></div>
                <div id="canvas">
                  <canvas
                    id="chart"
                    class="chart"
                    height="250"
                    style="display: none"
                  ></canvas>
                </div>
                <div class="container-flex">
                  <div
                    class="row mt-4"
                    style="
                      display: flex;
                      flex-direction: row;
                      justify-content: space-between;
                      padding-left: 10px;
                      padding-right: 10px;
                    "
                  >
                    <div class="col d-flex justify-content-center">
                      <button
                        class="
                          btn btn-sm btn-primary
                          chart-btn
                          prinary-btn-active
                        "
                        id="live"
                        onclick="drawChartAgain('live')"
                      >
                        ðŸ”´&nbsp;Live
                      </button>
                    </div>
                    <div class="col d-flex justify-content-center">
                      <button
                        class="btn btn-sm btn-primary chart-btn"
                        id="1h"
                        onclick="drawChartAgain('1h')"
                      >
                        1H
                      </button>
                    </div>
                    <div class="col d-flex justify-content-center">
                      <button
                        class="btn btn-sm btn-primary chart-btn"
                        id="1d"
                        onclick="drawChartAgain('1d')"
                      >
                        1D
                      </button>
                    </div>
                    <div class="col d-flex justify-content-center">
                      <button
                        class="btn btn-sm btn-primary chart-btn"
                        id="1w"
                        onclick="drawChartAgain('1w')"
                      >
                        1W
                      </button>
                    </div>
                    <div class="col d-flex justify-content-center">
                      <button
                        class="btn btn-sm btn-primary chart-btn"
                        id="1m"
                        onclick="drawChartAgain('1m')"
                      >
                        1M
                      </button>
                    </div>
                    <div class="col d-flex justify-content-center">
                      <button
                        class="btn btn-sm btn-primary chart-btn"
                        id="1y"
                        onclick="drawChartAgain('1y')"
                      >
                        1Y
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
      crossorigin="anonymous"
    ></script>

    <!-- ChartJS -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.3.0/chart.min.js"
      integrity="sha512-yadYcDSJyQExcKhjKSQOkBKy2BLDoW6WnnGXCAkCoRlpHGpYuVuBqGObf3g/TdB86sSbss1AOP4YlGSb6EKQPg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <!-- Numeral JS for humanize numbers -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"></script>

    <!-- Moment js for date and time -->
    <script src="./moment.js"></script>

    <!-- Custom Script -->
    <script src="./script.js"></script>

    <!-- Auto Trigger the following Script -->
    <script>
      // Get last 24hrs crypto market
      Market24hrs();

      // Draw chart
      drawChart("live");

      // Default Theme
      var localMode = localStorage.getItem("dark");

      if (!(localMode === "0" || localMode === "1")) {
        localStorage.removeItem("dark");
        localMode === null;
      }

      // Default Dark theme
      if (localMode === null) {
        localMode = 0;
        localStorage.setItem("dark", 0);
      }

      // When DOM Loads
      document.addEventListener("DOMContentLoaded", function (event) {
        if (parseInt(localMode)) {
          // Enabled dark mode
          var checkBox = document.getElementById("theme-switcher");
          checkBox.checked = true;

          var label = document.getElementById("theme-switcher-label");
          label.innerHTML = "Dark Mode";

          document.documentElement.setAttribute("data-theme", "dark");
        }
      });

      // Switch Theme
      var themeSwitcher = document.getElementById("theme-switcher");
      themeSwitcher.onclick = function () {
        var currentTheme = document.documentElement.getAttribute("data-theme");
        var switchToTheme = currentTheme === "dark" ? "light" : "dark";
        document.documentElement.setAttribute("data-theme", switchToTheme);

        var label = document.getElementById("theme-switcher-label");
        label.innerHTML = switchToTheme === "dark" ? "Dark Mode" : "Light Mode";

        localStorage.setItem("dark", switchToTheme === "dark" ? 1 : 0);
      };
    </script>
  </body>
</html>
